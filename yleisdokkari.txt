MUUTOKSET

28.1.2020
- Esitykseen lisätty triggeri, joka päivittää mainoksen esitysajan, sekä vähentää mainoksen hinnan määrärahoista
- mainoskampanjaan lisätty triggeri, joka seuraa, että on riittävästi rahaa
- Laitetaanko kampanja jäihin, kun rahat menevät miinukselle vai sitten kun ei ole varaa maksaa kalleimman mainoksen esitystä?

Muutoksia 27.1.2020
- PUID muokattu oikeaan muotoon 32{M}40
- Lisätty funktio, joka generoi tämän PUID:n
- Jinglen tiedoston_sijainti tietotyypiksi text
- Mainoskampanjan tilan default-arvoksi muutettu true



------------------------------------------------------
HUOM!

Mainoskampanjassa ja laskussa vierasavaimet linkitetty molempiin suuntiin
Mainoskampanja ei tarvi laskuid:tä?

Miksi profiilissa on lähetysaika? Mitä se kertoo? Miksi se ei ole itse mainoksessa?


Mitä on muuttunut?

Muutin laskurivin ja laskun vierasavaimen suunnan. Nyt laskurivi ottaa vierasavaimekseen laskuId:n.
Lisäksi mietin, että kampanjaId olisi viisaampi siirtää lasku-relaatioon

Lisäks tuolla iflack.sql tiedostossa on tällä hetkellä jotain ylimääräistä, mutta
en uskalla poistaa ku kuitenki tarvii vielä.

Mitä pitää vielä tehdä:

- loput luontilauseet
- populointi
- käteviä näkymiä esim. näkyy kampanja, laskun loppusumma jne. samassa taulussa

Katsoin alkuperäistä tehtävänantoa ja siellä ei ollut kampanjan poistossa velvoitetta,
että lasku pitäisi olla maksettu tai edes luotu 

Laskun luonti funktio (generoidaan lasku id josta valittuun kampanjaan tulee
yhdiste_kampanjaan laskuId, lisäksi 
SELECT * FROM kampanjan_mainokset km 
WHERE km.kampanjaId = (valitun kampanjanId))

Tarkistus triggeri, jos tulee uusi esitys, kyseisen mainoksen kampanjan kaikkien 
mainosten hinta pitää verrata kampanjan budjettiin (käytä kampanjan_mainokset näkymää)

Mitä hienoa on toteutettu?

Mainoskampanjan voi poistaa vain, jos siihen liittyvät maksut on suoritettu,
Eli siis jos laskun tila on maksettu, mainoskampanjan poistaminen aiheuttaa
myös laskun ja laskurivien poiston.

Mainoskampanjaa luodessa yhdiste_kampanja tauluun laskuId pitää asettaa NULL, 
koska lasku voidaan luoda vasta kampanjan loputtua

create viewit auttaa kyselyissä, ei vielä ajettu kantaan, eikä testattu